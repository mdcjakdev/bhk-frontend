<div id="dialog-block">

  <!--<div class="dialog-block-content">-->
  <mat-progress-bar *ngIf="dialogRef.disableClose" [color]="(isDelete()) ? 'warn' : 'accent'" mode="indeterminate">
  </mat-progress-bar>
  <h4 mat-dialog-title [ngClass]="(isDelete()) ? 'accent' : 'primary'">
    <div>
      <mat-icon *ngIf="!isDataNull() && isDetail()" style="margin-bottom: 8px;">description</mat-icon>
      <mat-icon *ngIf="!isDataNull() && (isInsert() || isUpdate())" style="margin-bottom: 4px;">subject</mat-icon>
      <mat-icon *ngIf="!isDataNull() && isDelete()" style="margin-bottom: 4px;">delete</mat-icon>

      <strong *ngIf="!isDataNull() && isDelete(); else elseHeader">&nbsp;Hapus Data</strong>
      <ng-template #elseHeader>
        <strong *ngIf="!isDataNull() && isDetail()">&nbsp;Rincian</strong>&nbsp;<strong>Permintaan Pembelian</strong>
      </ng-template>
    </div>
  </h4>

  <mat-dialog-content *ngIf="!isDataNull() && isDetail()" class="form-app">
    <div id="table-detail">
      <table class="full-width-table">
        <tr>
          <td>
            <li></li>
          </td>
          <td style="width: 160px">
            <strong>Nama Gudang</strong>
          </td>
          <td>
            <strong>:</strong>&nbsp;
          </td>
          <td>
            {{data.data.nama}}
          </td>
        </tr>
        <tr>
          <td>
            <li></li>
          </td>
          <td>
            <strong>Alamat</strong>
          </td>
          <td>
            <strong>:</strong>&nbsp;
          </td>
          <td>
            {{data.data.alamat}}
          </td>
        </tr>
        <tr>
          <td>
            <li></li>
          </td>
          <td>
            <strong>Auto Replenish</strong>
          </td>
          <td>
            <strong>:</strong>&nbsp;
          </td>
          <td>
            {{data.data.autoReplenish}}
          </td>
        </tr>
        <tr>
          <td>
            <li></li>
          </td>
          <td>
            <strong>Lokasi</strong>
          </td>
          <td>
            <strong>:</strong>&nbsp;
          </td>
          <td>
            {{data.data.lokasi.namaLokasi}}
          </td>
        </tr>
        <tr>
          <td>
            <li></li>
          </td>
          <td>
            <strong>Tanggal Pengoperasioan</strong>
          </td>
          <td>
            <strong>:</strong>&nbsp;
          </td>
          <td>
            {{date(data.data.tanggalMulai)}}
          </td>
        </tr>
        <tr>
          <td>
            <li></li>
          </td>
          <td>
            <strong>Kode</strong>
          </td>
          <td>
            <strong>:</strong>&nbsp;
          </td>
          <td>
            {{data.data.kode}}
          </td>
        </tr>
        <tr>
          <td>
            <li></li>
          </td>
          <td>
            <strong>Telepon</strong>
          </td>
          <td>
            <strong>:</strong>&nbsp;
          </td>
          <td>
            {{data.data.telepon}}
          </td>
        </tr>


      </table>
    </div>
  </mat-dialog-content>


  <mat-dialog-content *ngIf="!isDataNull() && (isInsert() || isUpdate())">
    <form [formGroup]="form">

      <!--<div class="row">-->
      <mat-tab-group #tabGroup
                     (selectedIndexChange)="onTabChanged($event)"
                     [selectedIndex]="selectedIndex"
                     [animationDuration]="'500ms'"
                     color="primary">
        <mat-tab>
          <ng-template mat-tab-label>
            Jenis Permintaan Pembelian
          </ng-template>
          <div>
            <div class="container-row">
              <div class="row">
                <div class="col-lg-4 col-md-6 col-sm-12 col-xs-12">
                  <mat-form-field [appearance]="formFieldAppearance">
                    <mat-select placeholder="Jenis Permintaan Pembelian"
                                [formControl]="jenisPermintaan"
                                [errorStateMatcher]="jenisPermintaanStateMatcher"
                                required>
                      <mat-option class="pilih">--&nbsp; Tentukan Jenis Permintaan Pembelian &nbsp;--</mat-option>
                      <mat-divider></mat-divider>
                      <mat-option value="LANGSUNG">Langsung</mat-option>
                      <mat-option value="TIDAK LANGSUNG">Tidak Langsung</mat-option>
                    </mat-select>

                    <mat-error
                      *ngIf="jenisPermintaan.hasError('required')">
                      Tentukan Jenis Permintaan Pembelian
                    </mat-error>
                  </mat-form-field>
                </div>
                <div class="col-lg-8 col-md-6 col-sm-12 col-xs-12">
                </div>


              </div>
            </div>
          </div>
        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label>
            Data Permintaan Pembelian
          </ng-template>
          <div class="container-row">
            <div class="row">
              <form [formGroup]="form">
                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">

                  <!--tanggal PR-->
                  <mat-form-field [appearance]="formFieldAppearance">
                    <mat-label>{{
                      (documentProperties.waiting) ? 'Mengambil tanggal PR dari server' : ((documentProperties.failed) ? 'Gagal mengambil tanggal PR' : 'Tanggal Permintaan Pembelian')
                      }}</mat-label>
                    <input matInput autocomplete="off"
                           formControlName="tanggalPermintaan" required
                           [errorStateMatcher]="stateMatchers.nomorDokumenPr.matcher">
                    <mat-error
                      *ngIf="reactiveFormUtil.formControl(form, 'tanggalPermintaan').hasError('required')">
                      {{stateMatchers.tanggalPermintaan.message}}</mat-error>
                  </mat-form-field>



                  <!--Nomor Dokumen-->
                  <mat-form-field [appearance]="formFieldAppearance">
                    <mat-label>{{
                      documentProperties.waiting ? 'Mengambil nomor dokumen dari server' : (documentProperties.failed ? 'Gagal mengambil nomor dokumen dari server' : 'Nomor Dokumen')
                      }}</mat-label>
                    <input matInput autocomplete="off"
                           formControlName="nomorDokumenPr" required
                           [errorStateMatcher]="stateMatchers.nomorDokumenPr.matcher">
                    <mat-error
                      *ngIf="reactiveFormUtil.formControl(form, 'nomorDokumenPr').hasError('required')">
                      {{stateMatchers.nomorDokumenPr.message}}</mat-error>
                  </mat-form-field>

                  <!--salesman-->
                  <mat-form-field formGroupName="salesman" [appearance]="formFieldAppearance">
                    <mat-select #selectSalesman
                                [placeholder]="(salesmanLazy.isEnabled()) ? 'Salesman' : (salesmanLazy.failToFetch ? 'Gagal memuat data salesman ....' : 'Memuat data salesman ......')"
                                formControlName="uuid"
                                [errorStateMatcher]="stateMatchers.salesman.matcher" [required]="salesmanLazy.isEnabled()">
                      <mat-option class="pilih">--&nbsp; Pilih salah satu &nbsp;--</mat-option>
                      <mat-divider></mat-divider>
                      <mat-option [value]="v.uuid" *ngFor="let v of salesmanLazy.data">
                        {{v.karyawan.nama}}
                      </mat-option>
                      <mat-divider></mat-divider>
                      <mat-option *ngIf="!salesmanLazy.isLast" (click)="salesmanLazy.refresh()" class="lebih-banyak">
                        <div *ngIf="!salesmanLazy.waitingLoadMore || salesmanLazy.failToFetch; else load" >Muat lebih banyak
                          ....
                        </div>
                        <ng-template #load>
                          <mat-progress-bar style="position: relative; border-radius: 0px" color="primary"
                                            mode="indeterminate"></mat-progress-bar>
                        </ng-template>
                      </mat-option>
                    </mat-select>
                    <button *ngIf="salesmanLazy.failToFetch" matSuffix mat-icon-button matTooltip="Segarkan Salesman"
                            (click)="salesmanLazy.refresh()"
                            [matTooltipPosition]="'left'">
                      <mat-icon color="primary">refresh</mat-icon>
                    </button>
                    <mat-error
                      *ngIf="reactiveFormUtil.formControl(reactiveFormUtil.getFormGroup(form, 'salesman'), 'uuid').hasError('required')">
                      {{stateMatchers.salesman.message}}</mat-error>
                  </mat-form-field>

                  <!--catatan-->
                  <mat-form-field [appearance]="formFieldAppearance">
                    <mat-label>Catatan</mat-label>
                    <textarea  matInput placeholder="Catatan" formControlName="catatan"></textarea>
                  </mat-form-field>
                </div>




                <div class="col-lg-6 col-md-12 col-sm-12 col-xs-12">

                </div>

              </form>

            </div>
          </div>
        </mat-tab>

        <mat-tab>
          <ng-template mat-tab-label>
            Pratinjau
          </ng-template>
          <div class="container-row">
            <div class="row">
              <div class="col-lg-6 col-md-6 col-sm-12 col-xs-12">
                <mat-form-field [appearance]="formFieldAppearance">
                  <mat-label>Kategori</mat-label>
                  <input matInput autocomplete="off" placeholder="Kategori ">

                </mat-form-field>
              </div>
            </div>
          </div>
        </mat-tab>
      </mat-tab-group>


    </form>
  </mat-dialog-content>
  <!--</div>-->


  <mat-divider class="divider-actions" *ngIf="!isDataNull() && (isInsert() || isUpdate())"></mat-divider>

  <mat-dialog-actions *ngIf="!isDataNull() && (isInsert() || isUpdate())" align="end">

    <button *ngIf="selectedIndex > 0"
            matPrefix
            mat-flat-button
            (click)="previous()"
            color="accent">
      Kembali
      <!--<mat-icon>chevron_right</mat-icon>-->
    </button>

    <span style="flex: 1 1 auto;"></span>
    <!--[disabled]="simpanButtonCondition(form.valid)"-->
    <button mat-flat-button
            [disabled]="selanjutnyaCondition()"
            (click)="next()"
            color="primary">
      Selanjutnya
      <!--<mat-icon>chevron_right</mat-icon>-->
    </button>
  </mat-dialog-actions>

  <mat-dialog-actions class="delete" *ngIf="!isDataNull() && isDelete()" align="end">
    <button mat-button [mat-dialog-close]="close">
      <span>Tidak</span>
    </button>
    <button mat-button (click)="delete(data.data.uuid)">
      <span>Ya</span>
    </button>
  </mat-dialog-actions>

</div>
